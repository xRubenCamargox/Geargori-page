<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content />
        <meta name="author" content />
        <title>Geargori</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/logo1.PNG" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/colors.css" rel="stylesheet" />
        <!-- IntlTelInput CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.css">
    </head>
    <body class="blue900 d-flex flex-column">
        <main class="flex-shrink-0">
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container px-5">
                    <a class="navbar-brand" href="index.html">
                        <img src="assets/logo.webp" alt="Geargori" width="auto" height="50">
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item" style="width: 190px;"><a class="nav-link navbar-brand text-warning" href="/index.html">Inicio</a></li>
                            <li class="nav-item" style="width: 190px;"><a class="nav-link navbar-brand text-warning" href="/index.html#gear-team">Sobre Nosotros</a></li>
                            <li class="nav-item" style="width: 190px;"><a class="nav-link navbar-brand text-warning" href="contact.html">Contactanos</a></li>
                            <li class="nav-item">
                                <a class="btn btn-success rounded-pill button" href="download.html">
                                    Inscribete al programa beta!<i class="bi bi-arrow-down-short"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Page content-->
            <section class="py-5">
                <div class="container px-5">
                    <!-- Contact form-->
                    <div class="blue900 rounded-3 py-5 px-4 px-md-5 mb-5">
                        <div class="text-center mb-5">
                            <div class="feature text-white rounded-3 mb-3"><i class="bi bi-envelope"></i></div>
                            <h1 class="fw-bolder text-white">Ponte en contacto con nosotros</h1>
                            <p class="lead fw-normal text-muted mb-0">Nos encantaría saber de usted.</p>
                        </div>
                        <div class="row gx-5 justify-content-center">
                            <div class="col-lg-8 col-xl-6">
                                <!-- * * * * * * * * * * * * * * *-->
                                <!-- * * SB Forms Contact Form * *-->
                                <!-- * * * * * * * * * * * * * * *-->
                                <!-- This form is pre-integrated with SB Forms.-->
                                <!-- To make this form functional, sign up at-->
                                <!-- https://startbootstrap.com/solution/contact-forms-->
                                <!-- to get an API token!-->
                                <form form id="contact-form">
                                    <!-- Name input-->
                                    <div class="mb-3">
                                        <label for="name" class="form-label text-white">Nombre Completo <span class="text-danger">*</span></label>
                                        <input class="form-control rounded w-100" name="name" id="name" type="text" placeholder="Escribe tu nombre completo..." required />
                                        <div class="form-text text-light mt-n3 mb-3">
                                            Así sabremos cómo llamarte
                                        </div>
                                    </div>
                                    <!-- Email address input-->
                                    <div class="mb-3">
                                        <label for="email" class="form-label text-white">Dirección de Correo Electrónico <span class="text-danger">*</span></label>
                                        <input class="form-control rounded w-100" name="email" id="email" type="email" placeholder="nombre@ejemplo.com" required />
                                        <div class="form-text text-light mt-n3 mb-3">
                                            Usaremos este correo para contactarte
                                        </div>
                                    </div>
                                    <!-- Phone number input-->
                                    <div class="mb-3">
                                        <label for="phone" class="form-label text-white">Número de Teléfono <span class="text-muted">(opcional)</span></label>
                                        <input class="form-control rounded w-100" name="phone" id="phone" type="tel" />
                                        <div class="form-text text-light mt-n3 mb-3">
                                            Para poder contactarte por teléfono si es necesario
                                        </div>
                                    </div>
                                    <!-- Message input-->
                                    <div class="mb-3">
                                        <label for="message" class="form-label text-white">Mensaje <span class="text-muted">(opcional)</span></label>
                                        <textarea class="form-control rounded w-100" name="message" id="message" type="text" placeholder="Escribe tu mensaje aquí..." style="height: 10rem"></textarea>
                                        <div class="form-text text-light mt-n3 mb-3">
                                            Cuéntanos cómo podemos ayudarte
                                        </div>
                                    </div>
                                    <!-- Submit error message-->
                                    <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3">Error al enviar el mensaje!</div></div>
                                    <!-- Submit Button-->
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-success rounded-pill button">
                                            Enviar Mensaje<i class="bi bi-send ms-2"></i>
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- Contact cards-->
                    <!-- <div class="row gx-5 row-cols-2 row-cols-lg-4 py-5">
                        <div class="col">
                            <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-chat-dots"></i></div>
                            <div class="h5 mb-2">Chat with us</div>
                            <p class="text-muted mb-0">Chat live with one of our support specialists.</p>
                        </div>
                        <div class="col">
                            <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-people"></i></div>
                            <div class="h5">Ask the community</div>
                            <p class="text-muted mb-0">Explore our community forums and communicate with other users.</p>
                        </div>
                        <div class="col">
                            <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-question-circle"></i></div>
                            <div class="h5">Support center</div>
                            <p class="text-muted mb-0">Browse FAQ's and support articles to find solutions.</p>
                        </div>
                        <div class="col">
                            <div class="feature bg-primary bg-gradient text-white rounded-3 mb-3"><i class="bi bi-telephone"></i></div>
                            <div class="h5">Call us</div>
                            <p class="text-muted mb-0">Call us during normal business hours at (555) 892-9403.</p>
                        </div>
                    </div> -->
                </div>
            </section>
        </main>
        <!-- Footer-->
        <footer class="bg-dark py-4 mt-auto">
            <div class="container px-5">
                <hr style="color:white">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto">
                        <a class="link-light" href="index.html">
                            <img src="assets/logo.webp" alt="Geargori" width="auto" height="70">
                        </a>
                    </div>
                    <div class="col-auto">
                        <ul class="list-unstyled">
                            <li>
                                <a class="nav-link link-light small" href="/index.html">INICIO</a>
                            </li>
                            <li>
                                <a class="nav-link link-light small" href="#">CONTACTANOS</a>
                            </li>
                            <li>
                                <a class="nav-link link-light small" href="#!">SOPORTE</a>
                            </li>
                            <li>
                                <a class="nav-link link-light small" href="#gear-team">SOBRE NOSOTROS</a>
                            </li>
                        </ul>
                        <!--
                            <span class="text-white mx-1">&middot;</span>
                            <span class="text-white mx-1">&middot;</span>
                        -->
                    </div>
                    <div class="col-auto">
                        <div class="col-auto blockquote-footer"><div class="small m-0 text-white">Copyright &copy; 2025 &middot; Geargori</div></div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- IntlTelInput JS -->
        <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>

        <!-- Modal de carga -->
        <div class="modal fade" id="loadingModal" tabindex="-1" aria-hidden="true" style="background:rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content bg-dark text-white text-center" style="background:rgba(0,0,0,0.85);border:none;">
                    <div class="modal-body">
                        <div class="spinner-border text-success mb-3" role="status"></div>
                        <div>
                            <strong>¡Un momento! Estamos procesando tu mensaje...
                                En unos segundos nos pondremos en contacto contigo.</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="successModal" tabindex="-1" aria-hidden="true" style="background:rgba(0,0,0,0.5);">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content bg-dark text-white text-center" style="background:rgba(0,0,0,0.85);border:none;">
                    <div class="modal-body">
                        <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem;"></i>
                        <div class="mt-3">
                            <strong>¡Gracias por contactarnos!<br>
                            Te responderemos a la brevedad.</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Firebase scripts -->
        <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
        <script>
            // Configuración de tu proyecto Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyCuWNgSVRHgXlHXXiVIpIyZFVmUGpMcDEo",
                authDomain: "geargori.firebaseapp.com",
                projectId: "geargori",
                storageBucket: "geargori.appspot.com",
                messagingSenderId: "652044624245",
                appId: "1:652044624245:web:09b74fadcfd11f80bdf33c",
                measurementId: "G-EKVVBX8057"
            };
        
            // Inicializa Firebase
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
        
            // Instancia global de los modales
            const loadingModalEl = document.getElementById('loadingModal');
            const loadingModal = new bootstrap.Modal(loadingModalEl, {
                backdrop: 'static',
                keyboard: false
            });
            const successModalEl = document.getElementById('successModal');
            const successModal = new bootstrap.Modal(successModalEl);
        
            // Maneja el envío del formulario de contacto
            document.querySelector('form').addEventListener('submit', async function(e) {
                e.preventDefault();
                const nombre = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phoneInput = document.getElementById('phone');
                const iti = window.iti;
                const phoneNumber = iti.getNumber();
                const mensaje = document.getElementById('message').value;
        
                // Validar campos requeridos
                if (!nombre || !email) {
                    if (!nombre) document.getElementById('name').classList.add('is-invalid');
                    if (!email) document.getElementById('email').classList.add('is-invalid');
                    return;
                }
        
                // Validar email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document.getElementById('email').classList.add('is-invalid');
                    return;
                }
        
                // Validar número de teléfono solo si se proporcionó uno
                if (phoneNumber && !iti.isValidNumber()) {
                    phoneInput.classList.add('is-invalid');
                    return;
                }
                phoneInput.classList.remove('is-invalid');
        
                // Mostrar modal de carga
                loadingModal.show();
        
                try {
                    await db.collection('contactar').add({
                        nombre: nombre,
                        email: email,
                        telefono: phoneNumber || null,
                        mensaje: mensaje || null,
                        fecha: new Date()
                    });
                    this.reset();
                    iti.setNumber("");
                    loadingModal.hide();
                    successModal.show();
                    document.getElementById('submitSuccessMessage')?.classList.add('d-none');
                    document.getElementById('submitErrorMessage')?.classList.add('d-none');
                } catch (error) {
                    loadingModal.hide();
                    document.getElementById('submitSuccessMessage')?.classList.add('d-none');
                    document.getElementById('submitErrorMessage')?.classList.remove('d-none');
                    console.error(error);
                }
            });
        
            // Inicializar IntlTelInput
            const input = document.querySelector("#phone");
            window.iti = intlTelInput(input, {
                initialCountry: "bo",
                preferredCountries: ["bo", "mx", "us", "ar", "cl", "co", "ve", "ec", "py", "uy"],
                separateDialCode: true,
                utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/utils.js",
            });

            // Ajustar el ancho del contenedor del input
            const itiContainer = document.querySelector('.iti');
            if (itiContainer) {
                itiContainer.style.width = '100%';
            }
        </script>
    </body>
</html>
